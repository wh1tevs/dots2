#!/usr/bin/env bash

set -euo pipefail

# Session
export XDG_SESSION_TYPE=wayland
export XDG_SESSION_DESKTOP=sway
export XDG_CURRENT_DESKTOP=sway

# Wayland stuff
export MOZ_ENABLE_WAYLAND=1
export QT_QPA_PLATFORM=wayland
export SDL_VIDEODRIVER=wayland
export _JAVA_AWT_WM_NONREPARENTING=1

nvidia=$(readlink -f /sys/class/drm/card*/device/driver 2>/dev/null | grep -q nvidia && echo '--unsupported-gpu' || true)

exec sway $nvidia "$@"

# vim: ft=sh
