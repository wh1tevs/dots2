#!/usr/bin/env bash

set -euo pipefail

if [[ -z "$VOLTA_HOME" ]]; then
  export VOLTA_HOME="$HOME/.volta"
fi

if [[ -z "$(grep "$VOLTA_HOME/bin" <<< "$PATH")" ]]; then
  export PATH="$VOLTA_HOME/bin:$PATH"
fi

if ! command -v volta &>/dev/null; then
  echo "[*] Installing volta"
  curl https://get.volta.sh | bash
fi

if ! command node -v &>/dev/null; then
  echo "[*] Installing node lts"
  volta install node@lts
fi

if ! command corepack -v &>/dev/null; then
  echo "[*] Enabling corepack"
  npm -g install corepack
  corepack enable --install-directory "$VOLTA_HOME/bin"
fi

echo "Done"

# vim: ft=sh
