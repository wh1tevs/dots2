#!/usr/bin/env bash

set -euo pipefail

BIN_DIR="$HOME/.local/lib/xdg-open-saml"
PAYLOAD="$BIN_DIR/XdgOpenSaml"
SOURCE_URL="https://raw.githubusercontent.com/filippor/xdgopensaml/11da23883905ce703508d9ab3a0e85f907fafd36/XdgOpenSaml"

if [[ ! -x "$PAYLOAD" ]]; then
  mkdir -p "$BIN_DIR"
  curl -fsSL -o "$PAYLOAD" "$SOURCE_URL"
  chmod +x "$PAYLOAD"
fi

exec "$PAYLOAD" "$@"

# vim: ft=sh
